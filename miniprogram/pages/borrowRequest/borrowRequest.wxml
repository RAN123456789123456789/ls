<!--pages/borrowRequest/borrowRequest.wxml-->
<view class="container">
  <view wx:if="{{loading}}" class="loading">
    <text>加载中...</text>
  </view>

  <view wx:elif="{{book}}" class="request-form">
    <!-- 图书信息 -->
    <view class="book-info-card">
      <text class="card-title">图书信息</text>
      <view class="book-detail">
        <text class="book-name">{{book.name}}</text>
        <text class="book-author" wx:if="{{book.author}}">作者：{{book.author}}</text>
      </view>
    </view>

    <!-- 借阅设置 -->
    <view class="form-section">
      <text class="section-title">借阅设置</text>
      <view class="form-item">
        <text class="form-label">借阅天数</text>
        <picker 
          mode="selector" 
          range="{{borrowDaysOptions}}"
          value="{{borrowDaysIndex}}"
          bindchange="onBorrowDaysChange"
        >
          <view class="picker">
            <text>{{form.borrowDays}}天</text>
            <text class="picker-arrow">›</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- 个人信息（非必填） -->
    <view class="form-section">
      <text class="section-title">个人信息（选填）</text>
      
      <view class="form-item">
        <text class="form-label">姓名</text>
        <input 
          class="form-input" 
          placeholder="请输入姓名"
          value="{{form.name}}"
          bindinput="onInputChange"
          data-field="name"
        />
      </view>

      <view class="form-item">
        <text class="form-label">电话</text>
        <input 
          class="form-input" 
          type="number"
          placeholder="请输入联系电话"
          value="{{form.phone}}"
          bindinput="onInputChange"
          data-field="phone"
        />
      </view>

      <view class="form-item">
        <text class="form-label">邮箱</text>
        <input 
          class="form-input" 
          type="text"
          placeholder="请输入邮箱地址"
          value="{{form.email}}"
          bindinput="onInputChange"
          data-field="email"
        />
      </view>

      <view class="form-item">
        <text class="form-label">学号/工号</text>
        <input 
          class="form-input" 
          placeholder="请输入学号或工号"
          value="{{form.studentId}}"
          bindinput="onInputChange"
          data-field="studentId"
        />
      </view>

      <view class="form-item">
        <text class="form-label">部门/院系</text>
        <input 
          class="form-input" 
          placeholder="请输入部门或院系"
          value="{{form.department}}"
          bindinput="onInputChange"
          data-field="department"
        />
      </view>

      <view class="form-item">
        <text class="form-label">借阅原因</text>
        <textarea 
          class="form-textarea" 
          placeholder="请输入借阅原因（选填）"
          value="{{form.reason}}"
          bindinput="onInputChange"
          data-field="reason"
          maxlength="200"
        />
      </view>

      <view class="form-item">
        <text class="form-label">备注</text>
        <textarea 
          class="form-textarea" 
          placeholder="其他需要说明的内容（选填）"
          value="{{form.remark}}"
          bindinput="onInputChange"
          data-field="remark"
          maxlength="200"
        />
      </view>
    </view>

    <!-- 提交按钮 -->
    <view class="submit-footer">
      <button
        class="submit-btn"
        bindtap="onSubmit"
        disabled="{{submitting}}"
      >
        <text class="btn-text">{{submitting ? '提交中...' : '提交申请'}}</text>
      </button>
    </view>
  </view>
</view>

