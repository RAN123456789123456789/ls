# 启动微信云托管服务

## 🔍 问题诊断

**当前状态**：
- ✅ 服务配置正常
- ❌ **实例数量：0个（自动暂停）** ← 这是问题所在！

**原因**：
- 服务被自动暂停，没有运行实例
- 所以API无法访问

## 🚀 启动服务步骤

### 方法1：通过部署发布页面启动

1. **在当前页面（部署发布）**
   - 找到"线上版本"区域
   - 看到"0个实例 (自动暂停)"
   - 点击旁边的"启动"或"发布"按钮

2. **或者点击"发布"按钮**
   - 页面顶部有绿色的"发布"按钮
   - 点击后会启动服务实例

### 方法2：通过服务设置启动

1. **切换到"服务设置"标签**
   - 点击顶部的"服务设置"标签

2. **配置实例数量**
   - 找到"实例配置"或"扩缩容配置"
   - 设置最小实例数：至少设置为 `1`
   - 保存配置

3. **启动服务**
   - 保存后服务会自动启动实例

### 方法3：检查自动暂停设置

1. **进入服务设置**
   - 查看是否有"自动暂停"或"空闲暂停"设置
   - 如果开启了，关闭这个功能

2. **设置最小实例数**
   - 确保最小实例数 ≥ 1
   - 这样服务就不会被自动暂停

## ⚙️ 推荐配置

### 实例配置

**最小实例数**：`1`
- 确保至少有一个实例运行
- 防止自动暂停

**最大实例数**：根据需求设置
- 开发测试：1-2个
- 生产环境：根据流量设置

### 自动暂停设置

**建议关闭自动暂停**：
- 如果服务需要随时可用，关闭自动暂停
- 如果只是测试，可以开启（节省资源）

## 📋 启动后验证

### 1. 检查实例状态

启动后，回到"部署发布"页面：
- 实例数量应该显示：`1个实例` 或更多
- 状态应该显示：`运行中`

### 2. 测试API连接

```powershell
# 测试旧域名（应该可以访问了）
Invoke-WebRequest -Uri "https://express-bec5-197615-5-1385276628.sh.run.tcloudbase.com/api" -Method GET -UseBasicParsing

# 测试新域名（配置好DNS后）
Invoke-WebRequest -Uri "https://ranguofang.com/api" -Method GET -UseBasicParsing
```

### 3. 查看运行日志

1. **切换到"运行日志"标签**
2. **查看日志输出**
   - 确认服务正常启动
   - 检查是否有错误信息

## 💡 常见问题

### Q1: 为什么会被自动暂停？

**可能原因**：
- 免费版或体验版有自动暂停功能
- 长时间无请求会自动暂停以节省资源
- 最小实例数设置为0

**解决**：
- 设置最小实例数为1
- 关闭自动暂停功能

### Q2: 启动需要多长时间？

**通常**：
- 冷启动：30秒-2分钟
- 热启动：几秒钟

### Q3: 启动后还是无法访问？

**检查**：
1. 实例是否真的启动了（查看实例数量）
2. 服务日志是否有错误
3. DNS配置是否正确（如果使用自定义域名）
4. 域名是否已绑定到服务

## 📝 操作步骤总结

1. ✅ **启动服务实例**
   - 点击"发布"按钮
   - 或设置最小实例数为1

2. ✅ **等待启动完成**
   - 查看实例数量变为1或更多
   - 状态变为"运行中"

3. ✅ **测试API**
   - 使用旧域名测试（确认服务可用）
   - 配置DNS后使用新域名测试

4. ✅ **配置域名**（如果还没配置）
   - 在云托管添加自定义域名
   - 配置DNS CNAME记录
   - 等待生效

## ⚠️ 重要提示

**免费版限制**：
- 可能有实例数量限制
- 可能有自动暂停功能
- 可能需要升级套餐才能保持服务常驻

**建议**：
- 开发测试：可以接受自动暂停，需要时手动启动
- 生产环境：升级套餐，设置最小实例数≥1，关闭自动暂停

